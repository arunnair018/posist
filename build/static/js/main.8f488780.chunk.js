(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),l=(a(87),a(88),a(9)),o=a(10),i=a(12),m=a(11),u=a(27),d=a(4),h=a(13),p=a.n(h),E=a(5),v=a.n(E),g=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",region:"",errors:{},redirect:!1},e.handleChange=function(t){e.setState(Object(u.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password,region:e.state.region.toLocaleLowerCase()};p.a.post("/login",a).then((function(t){v.a.set("token",t.data.token),v.a.set("region",t.data.region),v.a.set("username",t.data.username),v.a.set("id",t.data._id),e.setState({redirect:!0})})).catch((function(t){t.response?e.setState({errors:t.response.data}):e.setState({errors:{error:"Network Error"}}),console.log(e.state)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.errors;return this.state.redirect?r.a.createElement(d.a,{to:"/home"}):r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Log In"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Region",id:"region",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("center",null,e?r.a.createElement("span",{className:"error red-text text-darken-2"},e.error):""))))}}]),a}(n.Component),f=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:"",region:"",errors:"",redirect:!1},e.handleChange=function(t){e.setState(Object(u.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password,region:e.state.region};p.a.post("/users",a).then((function(t){e.props.login("1")})).catch((function(t){console.log(t),e.setState({errors:"error submitting"})}))},e.confirmPassword=function(t){t.target.value!==e.state.password?e.setState({errors:"Passwords not matching."}):e.setState({errors:""})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Register"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter username",id:"username",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",id:"email",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",id:"password",onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm password",id:"confirm_password",onChange:this.confirmPassword,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Region",id:"region",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),e?r.a.createElement("center",null,r.a.createElement("span",{className:"error"},e)):"")))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={login:"1"},e.changeScope=function(t){t.preventDefault(),e.setState({login:t.target.id})},e.changeLogin=function(t){e.setState({login:t})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{href:"/",className:"brand-logo left"},"Messenger"),r.a.createElement("ul",{className:"nav-ul right",id:"nav-mobile"},r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"#",id:"1",onClick:this.changeScope},"Login")),r.a.createElement("li",{className:"nav-li"},r.a.createElement("a",{href:"#",id:"0",onClick:this.changeScope},"Register"))))),"0"===this.state.login?r.a.createElement(f,{staw:this.state.login,login:this.changeLogin}):r.a.createElement(g,{staw:this.state.login}))}}]),a}(n.Component),b=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={show:!1,redirect:!1},e.showModal=function(){e.setState({show:!0})},e.hideModal=function(){e.setState({show:!1,redirect:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(d.a,{to:"/"}):r.a.createElement("main",null,r.a.createElement("div",{className:"header-channel"},r.a.createElement("span",{style:{fontSize:"25px"}},"Channels"),r.a.createElement("button",{type:"button",onClick:function(){e.props.setscope("modal")},className:"btn right"},"+")),r.a.createElement("hr",null),r.a.createElement("div",{className:"channel-list"},this.props.channels.map((function(t){return r.a.createElement("button",{className:"channel-button waves-effect",key:t._id,onClick:function(a){e.props.setscope(t._id)}},t.name)}))))}}]),a}(n.Component),w=a(37),y=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",description:"",tags:"",invites:[v.a.get("id")],users:e.props.user,names:[],redirect:!1},e.handleChange=function(t){e.setState(Object(u.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={name:e.state.name,description:e.state.description,tags:e.state.tags.split(" "),invites:e.state.invites},n=v.a.get("token");p.a.post("/channel",a,{headers:{Authorization:"Basic ".concat(n)}}).then((function(t){e.setState({redirect:!0})})).catch((function(e){console.log(e)}))},e.addInvites=function(t){t.preventDefault();var a=t.target.id,n=t.target.innerHTML;e.setState({invites:[].concat(Object(w.a)(e.state.invites),[a]),names:[].concat(Object(w.a)(e.state.names),[n])})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.users;return this.state.redirect?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Create a new channel"),r.a.createElement("section",{className:"modal-main"},r.a.createElement("div",{className:" modainer"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col- 12"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{placeholder:"Channel Name",id:"name",type:"text",className:"validate",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{placeholder:"tags (seperate by space)",id:"tags",type:"text",className:"validate",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{placeholder:"Description",id:"description",type:"text",className:"validate",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{placeholder:"invites",id:"invites",type:"text",className:"validate",onChange:this.handleChange,value:this.state.names,disabled:!0})),r.a.createElement("div",{class:"invites-list"},t.map((function(t){return t.username===v.a.get("username")?"":r.a.createElement("button",{onClick:e.addInvites,id:t._id,key:t._id,value:t,className:"invites"},t.username)}))))),r.a.createElement("button",{className:"btn waves-effect waves-light right",type:"submit",name:"action",onClick:this.handleSubmit},"CREATE"))))}}]),a}(n.Component),C=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:[],load:!1,currmsg:""},e.fetchData=function(){if("modal"===e.props.scope)e.setState({load:!0});else{var t=v.a.get("token");p.a.get("/message/".concat(e.props.scope),{headers:{Authorization:"Basic ".concat(t)}}).then((function(t){console.log(t),e.setState({message:t.data.reverse(),load:!0})})).catch((function(e){console.log(e)}))}},e.handleChange=function(t){e.setState({currmsg:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=v.a.get("token"),n=e.props.scope,r={username:v.a.get("username"),channel:n,message:e.state.currmsg};e.setState({message:[r].concat(Object(w.a)(e.state.message)),currmsg:""}),p.a.post("/message",r,{headers:{Authorization:"Basic ".concat(a)}}).then((function(t){e.setState({load:!0}),console.log(e.state.message)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"showModal",value:function(){this.setState({load:!0})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){this.props.scope!==e.scope&&this.fetchData()}},{key:"render",value:function(){return console.log(this.props.scope),this.state.load?"modal"===this.props.scope?r.a.createElement(y,{users:this.props.users}):r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s10"},r.a.createElement("input",{placeholder:"Message",type:"text",onChange:this.handleChange,value:this.state.currmsg})),r.a.createElement("div",{className:"input-field col s2"},r.a.createElement("button",{type:"submit",className:"waves-effect waves-light btn"},"Send")))),r.a.createElement("div",{className:"row msg"},this.state.message.map((function(e,t){var a=v.a.get("username")===e.username?"border-green":"border-red",n=v.a.get("username")===e.username?"right":"left";return r.a.createElement("div",{class:"col s12"},r.a.createElement("p",{className:"waves-effect waves-teal btn-flat ".concat(a),key:t},r.a.createElement("span",{className:"messenger ".concat(n)},e.username),r.a.createElement("span",null,e.message)))})))):r.a.createElement("center",null,'"Select a channel to display messages"')}}]),a}(n.Component),S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:"",modal:"",data:[]},e.closeModal=function(){e.setState({modal:""})},e.openModal=function(){e.setState({modal:"open-modal"})},e.logout=function(){v.a.remove("token"),v.a.remove("username"),v.a.remove("region")},e.searchpost=function(){var t={query:e.state.search};p.a.post("/search",t).then((function(t){e.setState({data:t.data}),e.openModal()})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{href:"/",className:"brand-logo"},"Messenger"),r.a.createElement("ul",{id:"nav-mobile",className:"right logout"},r.a.createElement("li",null,r.a.createElement("form",null,r.a.createElement("div",{className:"row search-row"},r.a.createElement("div",{className:"input-field col s8"},r.a.createElement("input",{placeholder:"Enter Keyword to search post",id:"first_name",type:"text",className:"validate search",onChange:function(t){return e.setState({search:t.target.value})}})),r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("a",{className:"btn",onClick:this.searchpost},"Search"))))),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/dashboard"},"Dashboard")),r.a.createElement("li",null,r.a.createElement("a",{href:"#",onClick:this.logout},"Logout")))))),r.a.createElement("div",null,r.a.createElement("div",{id:"myModal",class:"modal ".concat(this.state.modal)},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{className:"close",onClick:this.closeModal},"\xd7"),r.a.createElement("div",null,this.state.data.map((function(e,t){return r.a.createElement("div",{class:"searches",key:t},r.a.createElement("p",null,e.username),r.a.createElement("p",null,e.message),r.a.createElement("hr",null))})))))))}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={redirect:!1,users:[],channels:[],scope:"",load:!1},e.setScope=function(t){e.setState({scope:t,load:!0})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=v.a.get("token");p.a.get("/users",{headers:{Authorization:"Basic ".concat(t)}}).then((function(a){e.setState({users:a.data}),p.a.get("/channel",{headers:{Authorization:"Basic ".concat(t)}}).then((function(t){e.setState({channels:t.data,load:!0})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(d.a,{to:"/"}):this.state.load?r.a.createElement("div",{className:"home"},r.a.createElement(S,null),r.a.createElement("div",{className:"row nonav"},r.a.createElement("div",{className:"col s3"},r.a.createElement(b,{channels:this.state.channels,setscope:this.setScope})),r.a.createElement("div",{className:"col s9"},r.a.createElement("div",null,r.a.createElement(C,{scope:this.state.scope,users:this.state.users}))))):r.a.createElement("center",null,"loading...")}}]),a}(n.Component),j=a(56),O=a.n(j),D=(a(110),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={startDate:new Date,endDate:new Date,topChannels:[],topRegion:[],topTags:[],topUser:[]},e.fetchData=function(){var t={d1:e.state.startDate,d2:e.state.endDate};t.d1.toString()===t.d2.toString()&&(t.d1=new Date(Date.parse("2020-01-01T00:00:00.000Z"))),console.log(t),p.a.post("/metrics",t).then((function(t){e.setState({topChannels:t.data.topChannels,topRegion:t.data.topRegion,topTags:t.data.topTags,topUser:t.data.topUser,load:!0})})).catch((function(e){console.log(e)}))},e.handleStart=function(t){e.setState({startDate:t})},e.handleEnd=function(t){e.setState({endDate:t})},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement("center",null,r.a.createElement("div",{className:"date"},r.a.createElement("span",{className:"d"},"Start Date: \xa0\xa0\xa0",r.a.createElement(O.a,{selected:this.state.startDate,onSelect:this.handleStart}))),r.a.createElement("div",{className:"date"},r.a.createElement("span",{className:"d"},"End Date: \xa0\xa0\xa0",r.a.createElement(O.a,{selected:this.state.endDate,onSelect:this.handleEnd}))),r.a.createElement("a",{className:"waves-effect waves-light btn",onClick:this.fetchData},"Update")),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3"},"Top Channels",r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8"},"Channel Name"),r.a.createElement("div",{className:"col s4"},"Post Count")),r.a.createElement("hr",null),this.state.topChannels.map((function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col s8"},e.channelname),r.a.createElement("div",{className:"col s4"},e.count))}))),r.a.createElement("div",{className:"col s3"},"Top Users",r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8"},"User Name"),r.a.createElement("div",{className:"col s4"},"Post Count")),r.a.createElement("hr",null),this.state.topUser.map((function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col s8"},e.username),r.a.createElement("div",{className:"col s4"},e.count))}))),r.a.createElement("div",{className:"col s3"},"Top Tags",r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8"},"Tag Name"),r.a.createElement("div",{className:"col s4"},"Channel Count")),r.a.createElement("hr",null),this.state.topTags.map((function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col s8"},e.tag),r.a.createElement("div",{className:"col s4"},e.count))}))),r.a.createElement("div",{className:"col s3"},"Top Regions",r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8"},"Region Name"),r.a.createElement("div",{className:"col s4"},"User Count")),r.a.createElement("hr",null),this.state.topRegion.map((function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col s8"},e.region),r.a.createElement("div",{className:"col s4"},e.count))})))))))}}]),a}(n.Component)),A=a(43),M=function(e){var t=e.component,a=Object(A.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return v.a.get("token")?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/"})}}))},x=function(e){var t=e.component,a=(e.restricted,Object(A.a)(e,["component","restricted"]));return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return v.a.get("token")?r.a.createElement(d.a,{to:"/home"}):r.a.createElement(t,e)}}))},T=a(26);var R=function(){return r.a.createElement(T.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d.d,null,r.a.createElement(x,{exact:!0,path:"/",component:N}),r.a.createElement(M,{path:"/home",component:k}),r.a.createElement(M,{path:"/dashboard",component:D}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){e.exports=a(169)},87:function(e,t,a){},88:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.8f488780.chunk.js.map